<!DOCTYPE html>
<html lang="ru" id="htmlTag">

<head>

  <meta charset="utf-8" />
  <title>Quoridor</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/style.css?v=1.0.1" type="text/css" />
</head>

<body>

  <div id="mainMenu" class="screen active">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö (–Ω–∞–¥ –ø–æ–ª–µ–º) -->
    <h1 class="main-title mobile-only">Quoridor</h1>

    <div class="menu-layout">
      <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –¥–æ—Å–∫–∞ —Å –¥–µ–º–æ-–ø–∞—Ä—Ç–∏–µ–π -->
      <div class="board-preview">
        <div class="demo-board-container">
          <div class="player-bar demo-player-bar top">
            <div class="avatar-container">
              <div class="avatar"></div>
            </div>
            <div class="player-info">
              <span class="player-name" data-i18n="pname_opponent">–û–ø–ø–æ–Ω–µ–Ω—Ç</span>
            </div>
          </div>

          <canvas id="demoBoard" width="720" height="720"></canvas>

          <div class="player-bar demo-player-bar bottom">
            <div class="avatar-container">
              <div class="avatar"></div>
            </div>
            <div class="player-info">
              <span class="player-name" data-i18n="pname_you">–í—ã</span>
            </div>
          </div>
        </div>
      </div>

      <!-- –ü–∞–Ω–µ–ª—å –º–µ–Ω—é -->
      <div class="menu-panel">
        <h1 class="main-title desktop-only">Quoridor</h1>

        <div class="menu-buttons">
          <div id="playOnlineContainer">
            <button id="playOnlineBtn" onclick="UI.showTimeSelection()" data-i18n="menu_play_online">‚ö° –ò–≥—Ä–∞—Ç—å
              –æ–Ω–ª–∞–π–Ω</button>
            <button id="cancelSearchBtn" class="hidden" onclick="UI.hideSearch(); Net.cancelFindGame()">
              <span data-i18n="menu_cancel_search">–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫</span>
              <span id="searchTimer">0:00</span>
            </button>
          </div>
          <button id="playFriendBtn" onclick="UI.showDynamicPanel('panelRoom')" data-i18n="menu_play_friend">üë• –ò–≥—Ä–∞—Ç—å —Å
            –¥—Ä—É–≥–æ–º</button>
          <button onclick="UI.showDynamicPanel('panelMode')" data-i18n="menu_local_game">üéÆ –õ–æ–∫–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞</button>
          <button onclick="UI.showDynamicPanel('panelRules')" data-i18n="menu_rules">üìñ –ü—Ä–∞–≤–∏–ª–∞</button>
          <button onclick="UI.showDynamicPanel('panelSettings')" data-i18n="menu_settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
      </div>

      <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å (–º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ –∏ –∏–Ω—Ñ–æ) -->
      <div class="dynamic-panel empty" id="dynamicPanel">
        <button class="close-panel-btn" onclick="UI.hideDynamicPanel()">√ó</button>
        <!-- –û–≤–µ—Ä–ª–µ–π –ø–æ–∏—Å–∫–∞ –∏–≥—Ä—ã -->
        <div id="searchOverlay" class="search-overlay hidden">
          <div class="search-spinner"></div>
          <p data-i18n="menu_searching">–ü–æ–∏—Å–∫ –∏–≥—Ä—ã...</p>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å: –í—ã–±–æ—Ä –∫–æ–Ω—Ç—Ä–æ–ª—è –≤—Ä–µ–º–µ–Ω–∏ -->
        <div id="panelTimeSelect" class="dynamic-content hidden">
          <h3 data-i18n="time_select_title">–ö–æ–Ω—Ç—Ä–æ–ª—å –≤—Ä–µ–º–µ–Ω–∏</h3>
          <div class="time-categories">
            <div class="time-category">
              <span class="cat-label" data-i18n="time_cat_bullet">–ü—É–ª—è</span>
              <div class="time-options">
                <button class="time-opt" onclick="UI.selectTime(60, 0, this)">1 –º–∏–Ω.</button>
                <button class="time-opt" onclick="UI.selectTime(60, 1, this)">1|1</button>
                <button class="time-opt" onclick="UI.selectTime(120, 1, this)">2|1</button>
              </div>
            </div>
            <div class="time-category">
              <span class="cat-label" data-i18n="time_cat_blitz">–ë–ª–∏—Ü</span>
              <div class="time-options">
                <button class="time-opt" onclick="UI.selectTime(180, 0, this)">3 –º–∏–Ω.</button>
                <button class="time-opt" onclick="UI.selectTime(180, 2, this)">3|2</button>
                <button class="time-opt" onclick="UI.selectTime(300, 0, this)">5 –º–∏–Ω.</button>
              </div>
            </div>
            <div class="time-category">
              <span class="cat-label" data-i18n="time_cat_rapid">–†–∞–ø–∏–¥</span>
              <div class="time-options">
                <button class="time-opt" onclick="UI.selectTime(600, 0, this)">10 –º–∏–Ω.</button>
                <button class="time-opt" onclick="UI.selectTime(900, 10, this)">15|10</button>
                <button class="time-opt" onclick="UI.selectTime(1800, 0, this)">30 –º–∏–Ω.</button>
              </div>
            </div>
          </div>
          <button id="startSearchBtn" class="primary-btn disabled" onclick="UI.startOnlineSearch()"
            data-i18n="btn_start_search" disabled>–ù–∞–π—Ç–∏ –∏–≥—Ä—É</button>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å: –ò–≥—Ä–∞ —Å –¥—Ä—É–≥–æ–º -->
        <div id="panelRoom" class="dynamic-content hidden">
          <h3 data-i18n="screen_room_title">–ò–≥—Ä–∞ —Å –¥—Ä—É–≥–æ–º</h3>
          <div class="room-section">
            <!-- –ö–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∞, —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
            <button class="primary-btn hidden" id="createRoomBtn" onclick="UI.createPrivateRoom()"
              data-i18n="btn_create_room">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>

            <div id="roomCodeDisplay" class="hidden">
              <p data-i18n="room_created_msg">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã —Å–æ–∑–¥–∞–Ω! –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –¥—Ä—É–≥—É:</p>
              <div class="code-box">
                <span id="roomCodeValue">XXXXX</span>
                <button class="copy-btn" onclick="UI.copyRoomCode()" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å">üìã</button>
              </div>

              <div class="link-box">
                <p class="link-label" data-i18n="label_copy_link">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Å—ã–ª–∫—É, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:</p>
                <div class="link-value" id="roomLinkDisplay" onclick="UI.copyRoomLink()">http://...</div>
              </div>

              <p class="room-hint" data-i18n="room_waiting">–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞...</p>
            </div>
          </div>
          <div class="separator-line" data-i18n="label_or">–∏–ª–∏</div>
          <div class="room-section">
            <div class="room-join-group">
              <input type="text" id="roomCodeInput" maxlength="5" placeholder="CODE" class="room-code-input"
                oninput="UI.validateRoomInput(this)">
              <button class="secondary-btn disabled" id="joinRoomBtn" onclick="UI.joinPrivateRoom()"
                data-i18n="btn_join_room" disabled>–í–æ–π—Ç–∏</button>
            </div>
          </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å: –õ–æ–∫–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞ -->
        <div id="panelMode" class="dynamic-content hidden">
          <h3 data-i18n="screen_mode_title">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º</h3>
          <div class="panel-buttons">
            <button onclick="Game.startPvP()" data-i18n="mode_pvp">–î–≤–∞ –∏–≥—Ä–æ–∫–∞ (PvP)</button>
            <div class="separator-line" data-i18n="mode_bot_title">–ò–≥—Ä–∞ —Å –±–æ—Ç–æ–º</div>
            <button onclick="UI.selectBotDifficulty('easy')" data-i18n="mode_bot_easy">–õ–µ–≥–∫–∏–π –±–æ—Ç</button>
            <button onclick="UI.selectBotDifficulty('medium')" data-i18n="mode_bot_medium">–°—Ä–µ–¥–Ω–∏–π –±–æ—Ç</button>
            <button onclick="UI.selectBotDifficulty('hard')" data-i18n="mode_bot_hard">–°–∏–ª—å–Ω—ã–π –±–æ—Ç</button>
            <button onclick="UI.selectBotDifficulty('impossible')" data-i18n="mode_bot_impossible">–ù–µ–ø–æ–±–µ–¥–∏–º—ã–π
              –±–æ—Ç</button>
          </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å: –ü—Ä–∞–≤–∏–ª–∞ -->
        <div id="panelRules" class="dynamic-content hidden">
          <h3 data-i18n="screen_rules_title">–ü—Ä–∞–≤–∏–ª–∞</h3>
          <div class="rules-content-inline">
            <div class="rules-section">
              <h4 data-i18n="rules_goal_title">üéØ –¶–µ–ª—å</h4>
              <p data-i18n="rules_goal_text">–ü–µ—Ä–≤—ã–º –¥–æ–≤–µ–¥–∏—Ç–µ —Å–≤–æ—é —Ñ–∏—à–∫—É –¥–æ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–≥–æ –∫—Ä–∞—è –¥–æ—Å–∫–∏.</p>
            </div>
            <div class="rules-section">
              <h4 data-i18n="rules_turn_title">üé≤ –•–æ–¥</h4>
              <p data-i18n="rules_turn_text">–ó–∞ —Ö–æ–¥ –º–æ–∂–Ω–æ: –ø–µ—Ä–µ–¥–≤–∏–Ω—É—Ç—å —Ñ–∏—à–∫—É –Ω–∞ 1 –∫–ª–µ—Ç–∫—É –∏–ª–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–µ–Ω—É.</p>
            </div>
            <div class="rules-section">
              <h4 data-i18n="rules_jump_title">üö∂ –ü—Ä—ã–∂–∫–∏</h4>
              <p data-i18n="rules_jump_text">–ï—Å–ª–∏ —Å–æ–ø–µ—Ä–Ω–∏–∫ —Ä—è–¥–æ–º ‚Äî –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø—Ä—ã–≥–Ω—É—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–≥–æ.</p>
            </div>
            <div class="rules-section">
              <h4 data-i18n="rules_wall_title">üß± –°—Ç–µ–Ω—ã</h4>
              <p data-i18n="rules_wall_text">–°—Ç–µ–Ω–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 2 –∫–ª–µ—Ç–∫–∏. –ù–µ–ª—å–∑—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç—å –∫ —Ü–µ–ª–∏.</p>
            </div>
            <div class="rules-section">
              <h4 data-i18n="rules_controls_title">‚å®Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h4>
              <p data-i18n="rules_controls_text"><kbd>H</kbd> ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç–µ–Ω–∞, <kbd>V</kbd> ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è,
                <kbd>R</kbd> ‚Äî –ø–æ–≤–µ—Ä–Ω—É—Ç—å.
              </p>
            </div>
          </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div id="panelSettings" class="dynamic-content hidden">
          <h3 data-i18n="screen_settings_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
          <div class="settings-grid-inline">
            <label data-i18n="label_theme">–¢–µ–º–∞:</label>
            <select id="themeSelectInline">
              <option value="dark" data-i18n="theme_dark">–¢—ë–º–Ω–∞—è</option>
              <option value="light" data-i18n="theme_light">–°–≤–µ—Ç–ª–∞—è</option>
            </select>
            <label data-i18n="label_lang">–Ø–∑—ã–∫:</label>
            <select id="langSelectInline">
              <option value="ru">–†—É—Å—Å–∫–∏–π</option>
              <option value="en">English</option>
            </select>
            <label data-i18n="label_sound">–ó–≤—É–∫:</label>
            <select id="soundSelectInline">
              <option value="on" data-i18n="sound_on">–í–∫–ª</option>
              <option value="off" data-i18n="sound_off">–í—ã–∫–ª</option>
            </select>
          </div>
          <button class="primary-btn" onclick="UI.saveSettingsInline()" data-i18n="btn_save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </div>

      <!-- –ò–Ω—Ñ–æ-–ø–∞–Ω–µ–ª—å —Å–ø—Ä–∞–≤–∞ (–°–æ–≤–µ—Ç—ã –∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥) -->
      <div class="info-panel" id="infoPanel">
        <div class="info-card">
          <div class="info-card-header">
            <span class="info-icon">üí°</span>
            <h3 data-i18n="info_tip_title">–°–æ–≤–µ—Ç –¥–Ω—è</h3>
          </div>
          <p id="dailyTip" data-i18n="info_tip_text">–°—Ç–µ–Ω—ã ‚Äî –≤–∞—à–µ –≥–ª–∞–≤–Ω–æ–µ –æ—Ä—É–∂–∏–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö, —á—Ç–æ–±—ã —É–¥–ª–∏–Ω–∏—Ç—å –ø—É—Ç—å
            —Å–æ–ø–µ—Ä–Ω–∏–∫–∞, –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ —Å–µ–±—è!</p>
        </div>
        <div class="info-card">
          <div class="info-card-header">
            <span class="info-icon">üèÜ</span>
            <h3 data-i18n="info_leaderboard_title">–õ–∏–¥–µ—Ä–±–æ—Ä–¥</h3>
          </div>
          <div class="leaderboard">
            <div class="leaderboard-row"><span class="rank">1</span><span class="name">GrandMaster42</span><span
                class="score">1850</span></div>
            <div class="leaderboard-row"><span class="rank">2</span><span class="name">WallBuilder</span><span
                class="score">1720</span></div>
            <div class="leaderboard-row"><span class="rank">3</span><span class="name">QuoridorPro</span><span
                class="score">1695</span></div>
            <div class="leaderboard-row"><span class="rank">4</span><span class="name">StrategyKing</span><span
                class="score">1640</span></div>
            <div class="leaderboard-row"><span class="rank">5</span><span class="name">PawnRunner</span><span
                class="score">1580</span></div>
          </div>
          <p class="info-hint" data-i18n="info_hint">–†–µ–π—Ç–∏–Ω–≥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
        </div>
      </div>
    </div>
  </div>


  <div id="modeScreen" class="screen">
    <h2 data-i18n="screen_mode_title">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º</h2>
    <div class="mode-buttons">
      <button onclick="Game.startPvP()" data-i18n="mode_pvp">–î–≤–∞ –∏–≥—Ä–æ–∫–∞ (PvP)</button>

      <div class="separator-line" data-i18n="mode_bot_title">–ò–≥—Ä–∞ —Å –±–æ—Ç–æ–º</div>

      <button onclick="UI.selectBotDifficulty('easy')" data-i18n="mode_bot_easy">–õ–µ–≥–∫–∏–π –±–æ—Ç</button>
      <button onclick="UI.selectBotDifficulty('medium')" data-i18n="mode_bot_medium">–°—Ä–µ–¥–Ω–∏–π –±–æ—Ç</button>
      <button onclick="UI.selectBotDifficulty('hard')" data-i18n="mode_bot_hard">–°–∏–ª—å–Ω—ã–π –±–æ—Ç</button>
      <button onclick="UI.selectBotDifficulty('impossible')" data-i18n="mode_bot_impossible">–ù–µ–ø–æ–±–µ–¥–∏–º—ã–π –±–æ—Ç</button>
    </div>
    <button onclick="UI.backToMenu()" data-i18n="btn_back">–ù–∞–∑–∞–¥</button>
  </div>

  <div id="colorSelectScreen" class="screen">
    <h2 data-i18n="screen_color_title">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ—Ä–æ–Ω—É</h2>
    <p data-i18n="color_white_hint">–ë–µ–ª—ã–µ –≤—Å–µ–≥–¥–∞ —Ö–æ–¥—è—Ç –ø–µ—Ä–≤—ã–º–∏</p>
    <div class="menu-buttons horizontal">
      <button onclick="Game.startVsBot('white')" data-i18n="btn_play_white">
        ‚ö™ –ò–≥—Ä–∞—Ç—å –∑–∞ –ë–µ–ª—ã—Ö<br>(–í—ã —Ö–æ–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–º)
      </button>
      <button onclick="Game.startVsBot('black')" data-i18n="btn_play_black">
        ‚ö´ –ò–≥—Ä–∞—Ç—å –∑–∞ –ß—ë—Ä–Ω—ã—Ö<br>(–ë–æ—Ç —Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–º)
      </button>
    </div>
    <button onclick="UI.showModeSelect()" data-i18n="btn_back">–ù–∞–∑–∞–¥</button>
  </div>

  <div id="roomScreen" class="screen">
    <h2 data-i18n="screen_room_title">–ò–≥—Ä–∞ —Å –¥—Ä—É–≥–æ–º</h2>
    <div class="mode-buttons">
      <!-- –ë–ª–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è -->
      <div class="room-section">
        <button class="primary-btn" id="createRoomBtn" onclick="UI.createPrivateRoom()"
          data-i18n="btn_create_room">–°–æ–∑–¥–∞—Ç—å
          –∫–æ–º–Ω–∞—Ç—É</button>
        <div id="roomCodeDisplay" class="hidden">
          <p data-i18n="room_created_msg">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã —Å–æ–∑–¥–∞–Ω! –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –¥—Ä—É–≥—É:</p>
          <div class="code-box">
            <span id="roomCodeValue">XXXXX</span>
            <button class="copy-btn" onclick="UI.copyRoomCode()" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å">üìã</button>
          </div>
          <p class="room-hint" data-i18n="room_waiting">–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞...</p>
        </div>
      </div>

      <div class="separator-line" data-i18n="label_or">–∏–ª–∏</div>

      <!-- –ë–ª–æ–∫ –≤—Ö–æ–¥–∞ -->
      <div class="room-section">
        <div class="room-join-group">
          <input type="text" id="roomCodeInput" maxlength="5" placeholder="CODE"
            style="text-transform: uppercase; text-align: center; font-size: 1.5rem; width: 140px; margin-right: 10px; border-radius: 8px; border: 2px solid #444; background: #222; color: #fff; padding: 10px;">
          <button class="secondary-btn" id="joinRoomBtn" onclick="UI.joinPrivateRoom()"
            data-i18n="btn_join_room">–í–æ–π—Ç–∏</button>
        </div>
      </div>

      <button onclick="UI.backToMenu()" data-i18n="btn_back">–ù–∞–∑–∞–¥</button>
    </div>
  </div>
  <div id="gameScreen" class="screen">
    <div class="game-layout">

      <div class="board-area">

        <div class="player-bar" id="topPlayerBar">
          <div class="avatar-container">
            <div class="avatar"></div>
          </div>
          <div class="player-info">
            <div class="player-name-row">
              <span class="player-name" id="topPlayerName" data-i18n="pname_opponent">–û–ø–ø–æ–Ω–µ–Ω—Ç</span>
            </div>
          </div>
          <div class="timer" id="topPlayerTimer">10:00</div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç–µ–Ω –æ–ø–ø–æ–Ω–µ–Ω—Ç–∞ -->
        <div class="wall-inventory" id="topWallInventory"></div>

        <div id="game-container">
          <canvas id="board" width="1080" height="1080"></canvas>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∏—Ö —Å—Ç–µ–Ω (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ) -->
        <div class="wall-inventory" id="bottomWallInventory"></div>

        <div class="player-bar" id="bottomPlayerBar">
          <div class="avatar-container">
            <div class="avatar"></div>
          </div>
          <div class="player-info">
            <div class="player-name-row">
              <span class="player-name" id="bottomPlayerName" data-i18n="pname_you">–í—ã</span>
            </div>
          </div>
          <div class="timer" id="bottomPlayerTimer">10:00</div>
        </div>

      </div>

      <!-- –°–∞–π–¥–±–∞—Ä –¥–ª—è –±—É–¥—É—â–µ–π –∏—Å—Ç–æ—Ä–∏–∏ —Ö–æ–¥–æ–≤ -->
      <div class="sidebar">
        <div class="sidebar-content">
          <div id="moveHistory">
            <div class="history-header">
              <span data-i18n="pname_white">White</span>
              <span data-i18n="pname_black">Black</span>
            </div>
            <div class="history-list" id="historyList"></div>
            <div class="history-controls">
              <button id="histFirst" title="–í –Ω–∞—á–∞–ª–æ" onclick="Game.setHistoryView(0)">¬´</button>
              <button id="histPrev" title="–ù–∞–∑–∞–¥" onclick="Game.navigateHistory(-1)">‚Äπ</button>
              <button id="histNext" title="–í–ø–µ—Ä–µ–¥" onclick="Game.navigateHistory(1)">‚Ä∫</button>
              <button id="histLast" title="–í –∫–æ–Ω–µ—Ü" onclick="Game.setHistoryView(-1)">¬ª</button>
            </div>
          </div>
        </div>
        <div class="menu-actions">
          <button class="secondary-btn" onclick="UI.handleSurrender()" data-i18n="btn_surrender">–°–¥–∞—Ç—å—Å—è</button>
        </div>
      </div>

    </div>
  </div>

  <div id="settingsScreen" class="screen">
    <h2 data-i18n="screen_settings_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
    <div class="settings-grid">
      <label data-i18n="label_theme">–¢–µ–º–∞:</label>
      <select id="themeSelect">
        <option value="dark" data-i18n="theme_dark">–¢—ë–º–Ω–∞—è</option>
        <option value="light" data-i18n="theme_light">–°–≤–µ—Ç–ª–∞—è</option>
      </select>

      <label data-i18n="label_lang">–Ø–∑—ã–∫:</label>
      <select id="langSelect">
        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
        <option value="en">English</option>
      </select>

      <label data-i18n="label_sound">–ó–≤—É–∫:</label>
      <select id="soundSelect">
        <option value="on" data-i18n="sound_on">–í–∫–ª</option>
        <option value="off" data-i18n="sound_off">–í—ã–∫–ª</option>
      </select>
    </div>
    <br>
    <button onclick="UI.saveSettings()" data-i18n="btn_save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <button onclick="UI.backToMenu()" data-i18n="btn_back">–ù–∞–∑–∞–¥</button>
  </div>

  <div id="rulesScreen" class="screen">
    <div class="rules-header">
      <h2 data-i18n="screen_rules_title">–ü—Ä–∞–≤–∏–ª–∞</h2>
    </div>

    <div class="rules-content" id="rulesContentRu">
      <div class="rules-section">
        <h3>üéØ –¶–µ–ª—å</h3>
        <p>–ü–µ—Ä–≤—ã–º –¥–æ–≤–µ–¥–∏—Ç–µ —Å–≤–æ—é —Ñ–∏—à–∫—É –¥–æ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–≥–æ –∫—Ä–∞—è –¥–æ—Å–∫–∏.</p>
      </div>

      <div class="rules-section">
        <h3>üé≤ –•–æ–¥</h3>
        <p>–ë–µ–ª—ã–µ —Ö–æ–¥—è—Ç –ø–µ—Ä–≤—ã–º–∏. –ó–∞ —Ö–æ–¥ –º–æ–∂–Ω–æ:</p>
        <ul>
          <li>–ü–µ—Ä–µ–¥–≤–∏–Ω—É—Ç—å —Ñ–∏—à–∫—É –Ω–∞ 1 –∫–ª–µ—Ç–∫—É (–Ω–µ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏)</li>
          <li>–ü–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–µ–Ω—É (—É –≤–∞—Å 10 —Å—Ç–µ–Ω)</li>
        </ul>
      </div>

      <div class="rules-section">
        <h3>üö∂ –ü—Ä—ã–∂–∫–∏</h3>
        <p>–ï—Å–ª–∏ —Å–æ–ø–µ—Ä–Ω–∏–∫ —Å—Ç–æ–∏—Ç —Ä—è–¥–æ–º ‚Äî –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø—Ä—ã–≥–Ω—É—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–≥–æ. –ï—Å–ª–∏ –∑–∞ –Ω–∏–º —Å—Ç–µ–Ω–∞ ‚Äî –ø—Ä—ã–∂–æ–∫ –≤–±–æ–∫.</p>
      </div>

      <div class="rules-section">
        <h3>üß± –°—Ç–µ–Ω—ã</h3>
        <p>–°—Ç–µ–Ω–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 2 –∫–ª–µ—Ç–∫–∏. –ù–µ–ª—å–∑—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç—å –∫ —Ü–µ–ª–∏.</p>
      </div>

      <div class="rules-section">
        <h3>‚å®Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
        <ul>
          <li><kbd>H</kbd> ‚Äî –≤–∑—è—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é —Å—Ç–µ–Ω—É</li>
          <li><kbd>V</kbd> ‚Äî –≤–∑—è—Ç—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é —Å—Ç–µ–Ω—É</li>
          <li><kbd>R</kbd> ‚Äî –ø–æ–≤–µ—Ä–Ω—É—Ç—å —Å—Ç–µ–Ω—É</li>
          <li><kbd>Esc</kbd> ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å</li>
        </ul>
      </div>
    </div>

    <div class="rules-content hidden" id="rulesContentEn">
      <div class="rules-section">
        <h3>üéØ Goal</h3>
        <p>Be the first to reach the opposite edge of the board.</p>
      </div>

      <div class="rules-section">
        <h3>üé≤ Turn</h3>
        <p>White moves first. On your turn you can:</p>
        <ul>
          <li>Move your pawn 1 square (not diagonally)</li>
          <li>Place a wall (you have 10 walls)</li>
        </ul>
      </div>

      <div class="rules-section">
        <h3>üö∂ Jumps</h3>
        <p>If the opponent is adjacent ‚Äî jump over them. If blocked by a wall ‚Äî jump diagonally.</p>
      </div>

      <div class="rules-section">
        <h3>üß± Walls</h3>
        <p>Each wall covers 2 squares. You cannot completely block the path to the goal.</p>
      </div>

      <div class="rules-section">
        <h3>‚å®Ô∏è Controls</h3>
        <ul>
          <li><kbd>H</kbd> ‚Äî pick horizontal wall</li>
          <li><kbd>V</kbd> ‚Äî pick vertical wall</li>
          <li><kbd>R</kbd> ‚Äî rotate wall</li>
          <li><kbd>Esc</kbd> ‚Äî cancel</li>
        </ul>
      </div>
    </div>

    <button onclick="UI.backToMenu()" data-i18n="btn_back">–ù–∞–∑–∞–¥</button>
  </div>



  <div id="resultModal" class="modal-overlay hidden">
    <div class="modal-content">
      <h2 id="resultStatus" data-i18n="modal_win">–ü–û–ë–ï–î–ê</h2>
      <div class="result-divider"></div>
      <p id="resultReason"><span data-i18n="modal_reason">–ü—Ä–∏—á–∏–Ω–∞: </span><span id="resultReasonText"></span></p>
      <button class="primary-btn" onclick="Game.goToMainMenu()" data-i18n="btn_to_menu">–í –º–µ–Ω—é</button>
    </div>
  </div>

  <!-- Disconnect Overlay -->
  <div id="disconnectModal" class="disconnect-overlay hidden">
    <div class="disconnect-content">
      <div class="disconnect-title" data-i18n="disconnect_title">–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ</div>
      <div class="disconnect-msg" data-i18n="disconnect_msg">
        –í—ã –æ—Ç–∫—Ä—ã–ª–∏ –∏–≥—Ä—É –≤ –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ –∏–ª–∏ –æ–∫–Ω–µ.
        <br>–≠—Ç–∞ —Å–µ—Å—Å–∏—è –±—ã–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
      </div>
      <button class="primary-btn" onclick="location.reload()" data-i18n="btn_reconnect">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∏–≥—Ä—É
        (Reconnect)</button>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div id="confirmModal" class="confirm-overlay" style="display: none;">
    <div class="confirm-box">
      <div class="confirm-title" id="confirmTitle" data-i18n="confirm_title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
      <div class="confirm-msg" id="confirmMessage" data-i18n="confirm_msg">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</div>
      <div class="confirm-actions">
        <button class="primary-btn" id="confirmYes" data-i18n="btn_yes">–î–∞</button>
        <button class="secondary-btn" id="confirmNo" data-i18n="btn_no">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
  </div>

  <!-- Toasts Container -->
  <div id="notificationContainer" class="notification-container"></div>


  <script src="/socket.io/socket.io.js"></script>
  <script src="/ui.js?v=1.0.1"></script>
  <script src="/net.js?v=1.0.1"></script>
  <script src="/shared.js?v=1.0.1"></script>
  <script src="/ai.js?v=1.0.1"></script>
  <script src="/game.js?v=1.0.1"></script>
  <script src="/main.js?v=1.0.1"></script>
</body>

</html>